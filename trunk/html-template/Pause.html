<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>FlexDoor Pause Window.....................................</title>
<style>body{margin-top:10}</style>
</head>
<body scroll="no" onload="loaded()">

<center style='font-size:14px;font-weight:bold'>
	The window will automatically <br> close in <span id="time"></span>&nbsp;second(s).
	<br/><br/>
	<input type="button" value="Pause" onclick="pause(this)"/>
</center>

<script type="text/javascript">
	var interval1;
	var interval2;
	var ms;

	function loaded(){
		alert(window.opener);
		alert(window.dialogArguments);
		var parent = window.opener ? window.opener.FlexDoor : window.dialogArguments;
		ms = parent.pauseWindowDelay;
		wait();
	}

	function wait(){
		if(!isNaN(parent.pauseWindowDelay)){
			var span = document.getElementById('time');
			span.innerHTML = (ms / 1000);
			interval1 = setInterval(function(){ closeWindow(); }, ms);
			interval2 = setInterval(function(){ ms -= 1000; if(ms > 0) span.innerHTML = (ms / 1000); }, 1000);
		}else{
			closeWindow();
		}
	}
	
	function closeWindow(){
		var parent = window.opener ? window.opener.Utils : window.dialogArguments;
		parent.pauseWindowX = window.screenLeft != undefined ? window.screenLeft - 3 : window.screenX;
    	parent.pauseWindowY = window.screenTop != undefined ? window.screenTop - 29 : window.screenY;
	 	window.close()
	}
	
	function pause(button){
		if(button.value == "Pause"){
			button.value = "Resume";
			clearInterval(interval1);
			clearInterval(interval2);
		}else{
			button.value = "Pause";
			wait();
		}
	}
</script>
</body>
</html>